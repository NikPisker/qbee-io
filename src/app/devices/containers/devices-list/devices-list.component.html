<div class="container-wrapper">
  <app-header [title]="'Devices'"></app-header>

  <div class="content-wrapper flex-row align-center-justify-center">

    <div class=" table-wrapper">
      <mat-table [dataSource]="dataSource" matSort>

        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Name </mat-header-cell>
          <mat-cell *matCellDef="let row; let i = index">
            <a class="device-link" [routerLink]="['details', i]">{{ row.name }}</a>
          </mat-cell>
        </ng-container>

        <!-- Tags Column -->
        <ng-container matColumnDef="tags">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Tags </mat-header-cell>
          <mat-cell *matCellDef="let row">
            <span *ngFor="let tag of row.tags; last as isLast">
              {{ ((tag.length > 8) ? (tag | slice : 0 : 8) + '...' : (tag)) + (!isLast ? ',&nbsp;' : '') }}
            </span>
          </mat-cell>
        </ng-container>

        <!-- Description Column -->
        <ng-container matColumnDef="description">
          <mat-header-cell *matHeaderCellDef mat-sort-header> </mat-header-cell>
          <mat-cell *matCellDef="let row">
            <div class="flex-row align-center-justify-end full-width">
              <div class="marker" [appIndicatorHighlight]="row.description"></div>
            </div>
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>

      <mat-paginator [pageSizeOptions]="[10, 20, 40]" aria-label="Select page of devices"></mat-paginator>
    </div>

  </div>
</div>
